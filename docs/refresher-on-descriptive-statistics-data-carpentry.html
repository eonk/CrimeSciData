<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter4 Refresher on descriptive statistics &amp; data carpentry | Data Analysis in Crime Science</title>
  <meta name="description" content="This is a study material for Criminology students at the University of Manchester." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter4 Refresher on descriptive statistics &amp; data carpentry | Data Analysis in Crime Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a study material for Criminology students at the University of Manchester." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter4 Refresher on descriptive statistics &amp; data carpentry | Data Analysis in Crime Science" />
  
  <meta name="twitter:description" content="This is a study material for Criminology students at the University of Manchester." />
  

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualisation-with-r.html"/>
<link rel="next" href="foundations-of-statistical-inference-confidence-intervals.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in Crime Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html"><i class="fa fa-check"></i><b>1</b> A first lesson about R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#install-r-rstudio"><i class="fa fa-check"></i><b>1.1</b> Install R &amp; RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#open-up-and-explore-rstudio"><i class="fa fa-check"></i><b>1.2</b> Open up and explore RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#customising-the-rstudio-look"><i class="fa fa-check"></i><b>1.3</b> Customising the RStudio look</a></li>
<li class="chapter" data-level="1.4" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#getting-organised-r-projects"><i class="fa fa-check"></i><b>1.4</b> Getting organised: R Projects</a></li>
<li class="chapter" data-level="1.5" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#functions-talk-to-your-computer"><i class="fa fa-check"></i><b>1.5</b> Functions: Talk to your computer</a></li>
<li class="chapter" data-level="1.6" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#more-on-packages"><i class="fa fa-check"></i><b>1.6</b> More on packages</a></li>
<li class="chapter" data-level="1.7" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#objects-creating-an-object"><i class="fa fa-check"></i><b>1.7</b> Objects: creating an object</a></li>
<li class="chapter" data-level="1.8" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#more-on-objects"><i class="fa fa-check"></i><b>1.8</b> More on objects</a></li>
<li class="chapter" data-level="1.9" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#naming-conventions-for-objects-in-r"><i class="fa fa-check"></i><b>1.9</b> Naming conventions for objects in R</a></li>
<li class="chapter" data-level="1.10" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#r-object-types-vectors"><i class="fa fa-check"></i><b>1.10</b> R object types: vectors</a></li>
<li class="chapter" data-level="1.11" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#r-object-types-data-frame"><i class="fa fa-check"></i><b>1.11</b> R object types: Data frame</a></li>
<li class="chapter" data-level="1.12" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#exploring-data"><i class="fa fa-check"></i><b>1.12</b> Exploring data</a></li>
<li class="chapter" data-level="1.13" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#r-data-types-factors"><i class="fa fa-check"></i><b>1.13</b> R data types: Factors</a></li>
<li class="chapter" data-level="1.14" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#how-to-import-data"><i class="fa fa-check"></i><b>1.14</b> How to import data</a></li>
<li class="chapter" data-level="1.15" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#how-to-use-comment"><i class="fa fa-check"></i><b>1.15</b> How to use ‘comment’</a></li>
<li class="chapter" data-level="1.16" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#how-to-quit-rstudio"><i class="fa fa-check"></i><b>1.16</b> How to Quit RStudio</a></li>
<li class="chapter" data-level="1.17" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#summary-exercise-for-this-week"><i class="fa fa-check"></i><b>1.17</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html"><i class="fa fa-check"></i><b>2</b> Getting to know your data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#causality-in-social-sciences"><i class="fa fa-check"></i><b>2.1</b> Causality in social sciences</a></li>
<li class="chapter" data-level="2.2" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#getting-data-thanks-to-reproducibility"><i class="fa fa-check"></i><b>2.2</b> Getting data thanks to reproducibility</a></li>
<li class="chapter" data-level="2.3" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#getting-a-sense-for-your-data"><i class="fa fa-check"></i><b>2.3</b> Getting a sense for your data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#first-steps"><i class="fa fa-check"></i><b>2.3.1</b> First steps</a></li>
<li class="chapter" data-level="2.3.2" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#on-tibbles-and-labelled-vectors"><i class="fa fa-check"></i><b>2.3.2</b> On tibbles and labelled vectors</a></li>
<li class="chapter" data-level="2.3.3" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#turning-variables-into-factors-and-changing-the-labels"><i class="fa fa-check"></i><b>2.3.3</b> Turning variables into factors and changing the labels</a></li>
<li class="chapter" data-level="2.3.4" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#looking-for-missing-data-and-other-anomalies"><i class="fa fa-check"></i><b>2.3.4</b> Looking for missing data and other anomalies</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#data-wrangling-with-dplyr"><i class="fa fa-check"></i><b>2.4</b> Data wrangling with dplyr</a></li>
<li class="chapter" data-level="2.5" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#using-dplyr-single-verbs"><i class="fa fa-check"></i><b>2.5</b> Using dplyr single verbs</a></li>
<li class="chapter" data-level="2.6" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#using-dplyr-for-grouped-operations"><i class="fa fa-check"></i><b>2.6</b> Using dplyr for grouped operations</a></li>
<li class="chapter" data-level="2.7" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#making-comparisons-with-numerical-outcomes"><i class="fa fa-check"></i><b>2.7</b> Making comparisons with numerical outcomes</a></li>
<li class="chapter" data-level="2.8" data-path="getting-to-know-your-data.html"><a href="getting-to-know-your-data.html#summary-exercise-for-this-week-1"><i class="fa fa-check"></i><b>2.8</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html"><i class="fa fa-check"></i><b>3</b> Data visualisation with R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#anatomy-of-a-plot"><i class="fa fa-check"></i><b>3.2</b> Anatomy of a plot</a></li>
<li class="chapter" data-level="3.3" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#what-graph-should-i-use"><i class="fa fa-check"></i><b>3.3</b> What graph should I use?</a></li>
<li class="chapter" data-level="3.4" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#visualising-numerical-variables-histograms"><i class="fa fa-check"></i><b>3.4</b> Visualising numerical variables: Histograms</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#visualising-numerical-variables-density-plots"><i class="fa fa-check"></i><b>3.5</b> Visualising numerical variables: Density plots</a></li>
<li class="chapter" data-level="3.6" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#visualising-numerical-variables-box-plots"><i class="fa fa-check"></i><b>3.6</b> Visualising numerical variables: Box plots</a></li>
<li class="chapter" data-level="3.7" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#exploring-relationships-between-two-quantitative-variables-scatterplots"><i class="fa fa-check"></i><b>3.7</b> Exploring relationships between two quantitative variables: scatterplots</a></li>
<li class="chapter" data-level="3.8" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#scatterplots-conditioning-in-a-third-variable"><i class="fa fa-check"></i><b>3.8</b> Scatterplots conditioning in a third variable</a></li>
<li class="chapter" data-level="3.9" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#scatterplot-matrix"><i class="fa fa-check"></i><b>3.9</b> Scatterplot matrix</a></li>
<li class="chapter" data-level="3.10" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#titles-legends-and-themes-in-ggplot2"><i class="fa fa-check"></i><b>3.10</b> Titles, legends, and themes in ggplot2</a></li>
<li class="chapter" data-level="3.11" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#plotting-categorical-data-bar-charts"><i class="fa fa-check"></i><b>3.11</b> Plotting categorical data: bar charts</a></li>
<li class="chapter" data-level="3.12" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#further-resources"><i class="fa fa-check"></i><b>3.12</b> Further resources</a></li>
<li class="chapter" data-level="3.13" data-path="data-visualisation-with-r.html"><a href="data-visualisation-with-r.html#summary-exercise-for-this-week-2"><i class="fa fa-check"></i><b>3.13</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html"><i class="fa fa-check"></i><b>4</b> Refresher on descriptive statistics &amp; data carpentry</a>
<ul>
<li class="chapter" data-level="4.1" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#getting-some-data-from-eurobarometer"><i class="fa fa-check"></i><b>4.2</b> Getting some data from Eurobarometer</a></li>
<li class="chapter" data-level="4.3" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#thinking-about-your-data-filtering-cases"><i class="fa fa-check"></i><b>4.3</b> Thinking about your data: filtering cases</a></li>
<li class="chapter" data-level="4.4" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#selecting-variables-using-dplyrselect"><i class="fa fa-check"></i><b>4.4</b> Selecting variables: using <code>dplyr::select</code></a></li>
<li class="chapter" data-level="4.5" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#creating-summated-scales"><i class="fa fa-check"></i><b>4.5</b> Creating summated scales</a></li>
<li class="chapter" data-level="4.6" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#collapsing-categories-in-character-variables"><i class="fa fa-check"></i><b>4.6</b> Collapsing categories in character variables</a></li>
<li class="chapter" data-level="4.7" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#working-with-apparently-cryptic-variable-names-and-levels"><i class="fa fa-check"></i><b>4.7</b> Working with apparently cryptic variable names and levels</a></li>
<li class="chapter" data-level="4.8" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#recoding-factors"><i class="fa fa-check"></i><b>4.8</b> Recoding factors</a></li>
<li class="chapter" data-level="4.9" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#understanding-missing-data"><i class="fa fa-check"></i><b>4.9</b> Understanding missing data</a></li>
<li class="chapter" data-level="4.10" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#exploring-dataframes-visually"><i class="fa fa-check"></i><b>4.10</b> Exploring dataframes visually</a></li>
<li class="chapter" data-level="4.11" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#a-quick-recap-on-descriptive-statistics"><i class="fa fa-check"></i><b>4.11</b> A quick recap on descriptive statistics</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#central-tendency"><i class="fa fa-check"></i><b>4.11.1</b> Central Tendency</a></li>
<li class="chapter" data-level="4.11.2" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#dispersion"><i class="fa fa-check"></i><b>4.11.2</b> Dispersion</a></li>
<li class="chapter" data-level="4.11.3" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#bivariate-analysis"><i class="fa fa-check"></i><b>4.11.3</b> Bivariate analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#further-resources-1"><i class="fa fa-check"></i><b>4.12</b> Further resources</a></li>
<li class="chapter" data-level="4.13" data-path="refresher-on-descriptive-statistics-data-carpentry.html"><a href="refresher-on-descriptive-statistics-data-carpentry.html#summary-exercise-for-this-week-3"><i class="fa fa-check"></i><b>4.13</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html"><i class="fa fa-check"></i><b>5</b> Foundations of statistical inference: confidence intervals</a>
<ul>
<li class="chapter" data-level="5.1" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#generating-random-data"><i class="fa fa-check"></i><b>5.2</b> Generating random data</a></li>
<li class="chapter" data-level="5.3" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#sampling-data-and-sampling-variability"><i class="fa fa-check"></i><b>5.3</b> Sampling data and sampling variability</a></li>
<li class="chapter" data-level="5.4" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#sampling-distributions-and-sampling-experiments"><i class="fa fa-check"></i><b>5.4</b> Sampling distributions and sampling experiments</a></li>
<li class="chapter" data-level="5.5" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#the-normal-distribution-and-confidence-intervals-with-known-standard-errors"><i class="fa fa-check"></i><b>5.5</b> The normal distribution and confidence intervals with known standard errors</a></li>
<li class="chapter" data-level="5.6" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#asymptotic-confidence-intervals-for-means-and-proportions-using-r"><i class="fa fa-check"></i><b>5.6</b> Asymptotic confidence intervals for means and proportions using R</a></li>
<li class="chapter" data-level="5.7" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#a-brief-intro-to-resampling-and-bootstraping"><i class="fa fa-check"></i><b>5.7</b> A brief intro to resampling and bootstraping</a></li>
<li class="chapter" data-level="5.8" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#what-about-comparisons-sampling-distribution-for-the-difference-of-two-means"><i class="fa fa-check"></i><b>5.8</b> What about comparisons? Sampling distribution for the difference of two means</a></li>
<li class="chapter" data-level="5.9" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#comparing-means-visually-by-using-error-bars-representing-confidence-intervals-inference-by-eye"><i class="fa fa-check"></i><b>5.9</b> Comparing means visually by using error bars representing confidence intervals: inference by eye</a></li>
<li class="chapter" data-level="5.10" data-path="foundations-of-statistical-inference-confidence-intervals.html"><a href="foundations-of-statistical-inference-confidence-intervals.html#summary-exercise-for-this-week-4"><i class="fa fa-check"></i><b>5.10</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hypotheses.html"><a href="hypotheses.html"><i class="fa fa-check"></i><b>6</b> Hypotheses</a>
<ul>
<li class="chapter" data-level="6.1" data-path="hypotheses.html"><a href="hypotheses.html#the-logic-of-hypothesis-testing"><i class="fa fa-check"></i><b>6.1</b> The logic of hypothesis testing</a></li>
<li class="chapter" data-level="6.2" data-path="hypotheses.html"><a href="hypotheses.html#comparing-means-across-two-groups-the-t-test"><i class="fa fa-check"></i><b>6.2</b> Comparing means across two groups (the t-test)</a></li>
<li class="chapter" data-level="6.3" data-path="hypotheses.html"><a href="hypotheses.html#what-does-a-significant-effect-mean"><i class="fa fa-check"></i><b>6.3</b> What does a significant effect mean?</a></li>
<li class="chapter" data-level="6.4" data-path="hypotheses.html"><a href="hypotheses.html#power-analysis"><i class="fa fa-check"></i><b>6.4</b> Power analysis</a></li>
<li class="chapter" data-level="6.5" data-path="hypotheses.html"><a href="hypotheses.html#comparing-means-across-several-groups-anova"><i class="fa fa-check"></i><b>6.5</b> Comparing means across several groups (ANOVA)</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="hypotheses.html"><a href="hypotheses.html#the-problem-with-multiple-comparisons"><i class="fa fa-check"></i><b>6.5.1</b> The problem with multiple comparisons</a></li>
<li class="chapter" data-level="6.5.2" data-path="hypotheses.html"><a href="hypotheses.html#visual-exploration-of-differences-in-the-distributions-across-the-groups"><i class="fa fa-check"></i><b>6.5.2</b> Visual exploration of differences in the distributions across the groups</a></li>
<li class="chapter" data-level="6.5.3" data-path="hypotheses.html"><a href="hypotheses.html#anova"><i class="fa fa-check"></i><b>6.5.3</b> ANOVA</a></li>
<li class="chapter" data-level="6.5.4" data-path="hypotheses.html"><a href="hypotheses.html#checking-homogeneity-of-variance-and-dealing-with-unequal-spread"><i class="fa fa-check"></i><b>6.5.4</b> Checking homogeneity of variance and dealing with unequal spread</a></li>
<li class="chapter" data-level="6.5.5" data-path="hypotheses.html"><a href="hypotheses.html#checking-normality-and-dealing-with-problems"><i class="fa fa-check"></i><b>6.5.5</b> Checking normality and dealing with problems</a></li>
<li class="chapter" data-level="6.5.6" data-path="hypotheses.html"><a href="hypotheses.html#robust-anova"><i class="fa fa-check"></i><b>6.5.6</b> Robust ANOVA</a></li>
<li class="chapter" data-level="6.5.7" data-path="hypotheses.html"><a href="hypotheses.html#post-hoc-comparisons"><i class="fa fa-check"></i><b>6.5.7</b> Post Hoc Comparisons</a></li>
<li class="chapter" data-level="6.5.8" data-path="hypotheses.html"><a href="hypotheses.html#effect-size-for-anova"><i class="fa fa-check"></i><b>6.5.8</b> Effect size for ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="hypotheses.html"><a href="hypotheses.html#summary-exercise-for-this-week-5"><i class="fa fa-check"></i><b>6.6</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html"><i class="fa fa-check"></i><b>7</b> Studying relationships between two factors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#producing-cross-tabulations"><i class="fa fa-check"></i><b>7.1</b> Producing cross-tabulations</a></li>
<li class="chapter" data-level="7.2" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#expected-frequencies-and-chi-square"><i class="fa fa-check"></i><b>7.2</b> Expected frequencies and Chi-Square</a></li>
<li class="chapter" data-level="7.3" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#residuals"><i class="fa fa-check"></i><b>7.3</b> Residuals</a></li>
<li class="chapter" data-level="7.4" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#gamma"><i class="fa fa-check"></i><b>7.4</b> Gamma</a></li>
<li class="chapter" data-level="7.5" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#odds-and-odd-ratios"><i class="fa fa-check"></i><b>7.5</b> Odds and odd ratios</a></li>
<li class="chapter" data-level="7.6" data-path="studying-relationships-between-two-factors.html"><a href="studying-relationships-between-two-factors.html#summary-exercise-for-this-week-6"><i class="fa fa-check"></i><b>7.6</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html"><i class="fa fa-check"></i><b>8</b> An introduction to regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#introduction-models-in-scientific-research"><i class="fa fa-check"></i><b>8.1</b> Introduction: models in scientific research</a></li>
<li class="chapter" data-level="8.2" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#motivating-regression"><i class="fa fa-check"></i><b>8.2</b> Motivating regression</a></li>
<li class="chapter" data-level="8.3" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#fitting-a-simple-regression-model"><i class="fa fa-check"></i><b>8.3</b> Fitting a simple regression model</a></li>
<li class="chapter" data-level="8.4" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#residuals-revisited-r-squared"><i class="fa fa-check"></i><b>8.4</b> Residuals revisited: R squared</a></li>
<li class="chapter" data-level="8.5" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#inference-with-regression"><i class="fa fa-check"></i><b>8.5</b> Inference with regression</a></li>
<li class="chapter" data-level="8.6" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#fitting-regression-with-categorical-predictors"><i class="fa fa-check"></i><b>8.6</b> Fitting regression with categorical predictors</a></li>
<li class="chapter" data-level="8.7" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#motivating-multiple-regression"><i class="fa fa-check"></i><b>8.7</b> Motivating multiple regression</a></li>
<li class="chapter" data-level="8.8" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#fitting-and-interpreting-a-multiple-regression-model"><i class="fa fa-check"></i><b>8.8</b> Fitting and interpreting a multiple regression model</a></li>
<li class="chapter" data-level="8.9" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#presenting-your-regression-results."><i class="fa fa-check"></i><b>8.9</b> Presenting your regression results.</a></li>
<li class="chapter" data-level="8.10" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#rescaling-input-variables-to-assist-interpretation"><i class="fa fa-check"></i><b>8.10</b> Rescaling input variables to assist interpretation</a></li>
<li class="chapter" data-level="8.11" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#testing-conditional-hypothesis-interactions"><i class="fa fa-check"></i><b>8.11</b> Testing conditional hypothesis: interactions</a></li>
<li class="chapter" data-level="8.12" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#regression-assumptions"><i class="fa fa-check"></i><b>8.12</b> Regression assumptions</a></li>
<li class="chapter" data-level="8.13" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#model-building-and-variable-selection"><i class="fa fa-check"></i><b>8.13</b> Model building and variable selection</a></li>
<li class="chapter" data-level="8.14" data-path="an-introduction-to-regression.html"><a href="an-introduction-to-regression.html#summary-exercise-for-this-week-7"><i class="fa fa-check"></i><b>8.14</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html"><i class="fa fa-check"></i><b>9</b> Regression in the real world</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#introduction-3"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#plotting-residuals"><i class="fa fa-check"></i><b>9.2</b> Plotting residuals</a></li>
<li class="chapter" data-level="9.3" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#checking-for-normality-outliers-and-influential-data"><i class="fa fa-check"></i><b>9.3</b> Checking for normality, outliers and influential data</a></li>
<li class="chapter" data-level="9.4" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#dealing-with-non-linearities-and-unequal-variances"><i class="fa fa-check"></i><b>9.4</b> Dealing with non linearities (and unequal variances)</a></li>
<li class="chapter" data-level="9.5" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#transformations-and-unequal-variance"><i class="fa fa-check"></i><b>9.5</b> Transformations and unequal variance</a></li>
<li class="chapter" data-level="9.6" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#boostrapping-regression-models"><i class="fa fa-check"></i><b>9.6</b> Boostrapping regression models</a></li>
<li class="chapter" data-level="9.7" data-path="regression-in-the-real-world.html"><a href="regression-in-the-real-world.html#multicollinearity"><i class="fa fa-check"></i><b>9.7</b> Multicollinearity</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>10</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#introduction-4"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#fitting-logistic-regression"><i class="fa fa-check"></i><b>10.2</b> Fitting logistic regression</a></li>
<li class="chapter" data-level="10.3" data-path="logistic-regression.html"><a href="logistic-regression.html#assessing-model-fit-i-deviance-and-pseudo-r-squared"><i class="fa fa-check"></i><b>10.3</b> Assessing model fit I: deviance and pseudo r squared</a></li>
<li class="chapter" data-level="10.4" data-path="logistic-regression.html"><a href="logistic-regression.html#assessing-model-fit-ii-confusion-matrix-and-roc-curves"><i class="fa fa-check"></i><b>10.4</b> Assessing model fit II: confusion matrix and ROC curves</a></li>
<li class="chapter" data-level="10.5" data-path="logistic-regression.html"><a href="logistic-regression.html#interactions"><i class="fa fa-check"></i><b>10.5</b> Interactions</a></li>
<li class="chapter" data-level="10.6" data-path="logistic-regression.html"><a href="logistic-regression.html#further-resources-2"><i class="fa fa-check"></i><b>10.6</b> Further resources</a></li>
<li class="chapter" data-level="10.7" data-path="logistic-regression.html"><a href="logistic-regression.html#summary-exercise-for-this-week-8"><i class="fa fa-check"></i><b>10.7</b> Summary: exercise for this week</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="wrapping-up.html"><a href="wrapping-up.html"><i class="fa fa-check"></i><b>11</b> Wrapping up</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in Crime Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="refresher-on-descriptive-statistics-data-carpentry" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter4</span> Refresher on descriptive statistics &amp; data carpentry<a href="refresher-on-descriptive-statistics-data-carpentry.html#refresher-on-descriptive-statistics-data-carpentry" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-1" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Introduction<a href="refresher-on-descriptive-statistics-data-carpentry.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have already introduced the typical workflow of data analysis</p>
<p><img src="imgs/data-science-explore.png" /></p>
<p>In this figure produced by Hadley Wickham you can see the first stage of data analysis involves importing your data, getting it into a <a href="http://vita.had.co.nz/papers/tidy-data.pdf">tidy format</a>, and then doing some transformations so that you get the data in good shape for analysis. There is a famous and possibly false statistic that says that 80% of an analyst’s time is often devoted to these kind of operations. Although the statistic is likely made up, the truth is that the experience of many analysts resonates with it. So, you should not underestimate data carpentry or data wrangling (as these processes are often called) as a part of your analysis.</p>
<p>For various decades, social scientists of a quantitative persuasion worked primarily with survey data (for an excellent history of how this came to be you can read <a href="https://global.oup.com/academic/product/identities-and-social-change-in-britain-since-1940-9780199587650?cc=gb&amp;lang=en&amp;#">this book</a>), which came in rather tidy formats but often required some transformations. Today we are more likely to rely on “big” and other new forms of data (from the web, administrative sources, or a variety of sensors) that may require more significant processing before we can do any analysis with it. Think, for example, of data from online vendors of drugs available in the Dark Net. Some people talk of the advent of a new <a href="http://science.sciencemag.org/content/323/5915/721/tab-pdf">computational social science</a> around these new methods. This kind of data, indeed, opens avenues for research we could only dream of in the past as argued by <a href="https://www.sciencedirect.com/science/article/pii/S0955395919300313?via%3Dihub">some of our colleagues</a>. But getting this kind of data requires the development of new skills (e.g. web scraping) and generally requires more processing before they are tidy and ready for analysis.</p>
<p>R is particularly well suited for this new world. In this module, we only work with survey data, which tends to be tidier and easier to work within the context of an introductory course unit. But even when working with this kind of data you often have to think hard about required tidying and transformations before you can start your analysis.</p>
<p>In this module we expect you to download a survey dataset for analysis. These datasets are already rather tidy and have been professionally cleaned and prepared for analytical consumption. But you may still have to select cases and variables that are appropriate for your own analysis. Also, you likely will need to generate new variables or change existing ones for various reasons. It’s a rare data set in which every variable you need is measured directly. Examples of things you may need to do include:</p>
<ul>
<li>Combine various variables into a new one (eg., computing a rate)</li>
<li>Reduce the number of levels in a categorical variable</li>
<li>Format the variable to assign it to a more appropriate class if this is called for (e.g., character into factor). You will need to format date variables as dates, numerical variables as numbers, etc.).</li>
<li>Recode values identifying missing cases as NA.</li>
<li>Labelling all variables and categorical values so you don’t have to keep looking them up.</li>
<li>Change the labels associated with the levels of a categorical variable.</li>
</ul>
</div>
<div id="getting-some-data-from-eurobarometer" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Getting some data from Eurobarometer<a href="refresher-on-descriptive-statistics-data-carpentry.html#getting-some-data-from-eurobarometer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’re going to go ahead and download some data for the session today, specifically data from a <em>Eurobarometer</em>. Eurobarometers are opinion polls conducted regularly on behalf of the European Commission since 1973. Some of them ask the same questions over time to evaluate changes in European’s views on a variety of subjects (standard Eurobarometers). Others are focused on special topics and are conducted less regularly (special Eurobarometers). They are a useful source of datasets that you could use, for example, for your undergraduate dissertation.</p>
<p>The data from these surveys is accessible through the data catalogue of GESIS, a data warehouse at the <em>Leibniz Institute for the Social Sciences</em> in Germany. To download data from GESIS you have to register with them (following the registration link) <a href="https://login.gesis.org/realms/gesis/protocol/openid-connect/auth?client_id=gesis-gws-client&amp;redirect_uri=https%3A%2F%2Fsearch.gesis.org%2Fresearch_data&amp;response_mode=fragment&amp;response_type=code&amp;scope=openid&amp;ui_locales=en">here</a>. Once you activate your registration you should be able to access the data at GESIS. Use the <em>You are not registered?</em> option to fill in your details.</p>
<p><img src="imgs/register.PNG" /></p>
<p>GESIS has a section of their website devoted to the Eurobarometer survey. You can access that section <a href="https://www.gesis.org/eurobarometer-data-service/home/">here</a>. You could navigate this webpage to find the data we will be using for this tutorial, but to save time I will provide you a direct link to it. We will be using the special Eurobarometer 85.3 from 2016. This survey among other things asked Europeans about their views on gender violence.</p>
<p><img src="imgs/eb.PNG" /></p>
<p>You can access the data for this Eurobarometer <a href="https://search.gesis.org/research_data/ZA6695">here</a>.</p>
<p><img src="imgs/gesisa.png" /></p>
<p>You will see here that there are links to the files with the data in SPSS and STATA format. You can also see a tab where you can obtain the questionnaire for the survey. Once you are registered download the STATA version of the file and also an English version of the questionnaire. Make sure you place the file in your working directory. Once you do this you should be able to use the code we are using in this session.</p>
<p>First, we will load the data into our session. Since the data is in STATA format we will need to read the data into R using the <code>haven</code> package. Specifically, we will use the <code>read_dta()</code> function for importing STATA data into R. As an argument we need to write the name of the file with the data (and if it is not in your working directory, the appropriate path file).</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb216-1" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb216-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb216-2" tabindex="-1"></a><span class="co">#option 1: import from your local computer</span></span>
<span id="cb216-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb216-3" tabindex="-1"></a>eb85_3 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;datasets/ZA6695_v2-0-0.dta&quot;</span>)</span>
<span id="cb216-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb216-4" tabindex="-1"></a><span class="fu">dim</span>(eb85_3)</span></code></pre></div>
<pre><code>## [1] 27818   483</code></pre>
<p>Alternatively, you can import the file from the website where we keep the data:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb218-1" tabindex="-1"></a><span class="co">#option 2: import from the website</span></span>
<span id="cb218-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb218-2" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb218-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb218-3" tabindex="-1"></a>eb85_3 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;https://www.dropbox.com/s/sul9ezr4k9aua70/ZA6695_v2-0-0.dta?dl=1&quot;</span>)</span>
<span id="cb218-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb218-4" tabindex="-1"></a><span class="fu">dim</span>(eb85_3)</span></code></pre></div>
<pre><code>## [1] 27818   483</code></pre>
<p>We can see there are 27818 cases (survey participants) and 483 variables.</p>
</div>
<div id="thinking-about-your-data-filtering-cases" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Thinking about your data: filtering cases<a href="refresher-on-descriptive-statistics-data-carpentry.html#thinking-about-your-data-filtering-cases" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Imagine that we needed to write a report about attitudes to sexual violence.</p>
<p>First, we would need to think if we wanted to use all cases in the data or only a subset of the cases. For example, when using something like the Eurobarometer we would need to consider if we are interested in exploring the substantive topic across Europe or only for some countries. Or alternatively, you may want to focus your analysis only on men’s attitudes to sexual violence. In a situation like this, you would need to filter cases. This decision needs to be guided by your theoretical interests and your driving research question. Here is a video about Eurobarometer 2018. Not a fancy video but anyone who wants to know about Eurobarometer within a minute, have a look.</p>
<iframe src="https://www.youtube.com/embed/yTufHITtGBA" width="672" height="400px" data-external="1">
</iframe>
<p>So, for example, if we only wanted to work with the UK sample we would need to figure out if there is a variable that identifies the country in the dataset. To know this, we need to look at the <em>codebook</em> (sometimes called data dictionary). In this case, we can look at the interactive facility provided by GESIS for online data analysis, which provides an interactive online codebook for this dataset. You can access this facility in the link highlighted in the image below:</p>
<p><img src="imgs/linktoonlinea.png" /></p>
<p>Let’s explore the online facility for the Eurobarometer. If we expand the menus on the left-hand side by clicking on variable description, and then in standard nation id variables, you will see there is a variable that provides a “country code”. This must be it. click on it and then you will see on the right-hand side some information about this variable. You see the name of this variable (as it will appear in the dataset) <em>isocntry</em> and we can see this variable uses <a href="https://en.wikipedia.org/wiki/ISO_3166">ISO 3166</a> codes to designate the country. This is an international standard set of abbreviations for country names. For the UK these codes are “GB-GBN” and “GB-NIR” (for Northern Ireland).</p>
<p><img src="imgs/countrya.png" /></p>
<p>Now that we have this information we can run the code to select only the cases that have these values in the dataset. For doing something like that we would use the <code>dplyr::filter</code> function. We used the <code>filter</code> function in week 2. You can read more about it in the <code>dplyr</code> vignette.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb220-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb220-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb220-2" tabindex="-1"></a><span class="co">#First, let&#39;s see what type of vector isocntry is</span></span>
<span id="cb220-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb220-3" tabindex="-1"></a><span class="fu">class</span>(eb85_3<span class="sc">$</span>isocntry)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb222-1" tabindex="-1"></a>uk_eb85_3 <span class="ot">&lt;-</span> <span class="fu">filter</span>(eb85_3, isocntry <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;GB-GBN&quot;</span>, <span class="st">&quot;GB-NIR&quot;</span>))</span></code></pre></div>
<p>The variable <em>isocntry</em> is a character vector with codes for the different participating countries. Here we want to select all the cases in the survey that have either of two values in this vector (GB-GBN or GB-NIR). Since these values are text we need to use quotes to wrap them up. Because we are selecting more than one value we cannot simply say <code>isocntry == "GB-BGN"</code>. We also need the cases from Northern Ireland. So, we use a particular operator introduced by <code>dplyr</code> called a built-in infix operator (<code>%in%</code>). The <code>%in%</code> operator is essentially saying to R ‘returns logical vector’ if there is a match or not for its left operand. Basically, here we are creating a vector with the values matching conditions provided in a vector using the c() function, so R to look at those values within the list (containing the right labels) in the <em>isocntry</em> vector so that we can filter everything else out.</p>
<p>If you run this code you will end up with a new object called <code>uk_eb85_3</code> that only has 1306 observations. We have now a dataset that only has the British participants.</p>
</div>
<div id="selecting-variables-using-dplyrselect" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Selecting variables: using <code>dplyr::select</code><a href="refresher-on-descriptive-statistics-data-carpentry.html#selecting-variables-using-dplyrselect" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Perhaps, for the sake of this example, we decided to do an analysis that focuses on looking at attitudes toward sexual violence for all of Europe and for all participants. Yet, you won’t be using 483 variables for certain. Among other reasons because our guidelines for the essay suggest you use fewer variables. But more generally because typically your theoretical model will tell you that some things matter more than others.</p>
<p>The first thing you need to do is to think about what variables you are going to use. This involves first thinking about what variables are available in the dataset that measure your outcome of interest but then also considering what your theory of attitudes to gender violence says (this generally will include things that are not measured in the survey, such is life!).</p>
<p>For the sake of this exercise, we are assuming the thing you are interested in explaining or better understanding is attitudes regarding sexual violence. So, before anything else, you would need to spend some time thinking about how this survey measures these attitudes. You would need to screen the questionnaire and the codebook to identify these variables and their names in the dataset. Have a look at the questionnaire. The questions about gender violence start at the bottom of page 7. Which of these questions are questions about attitudes towards sexual violence?</p>
<p>Once you have all of this you would need to think about which of these survey questions and items make more sense for your research question. This is something where you will need to use your common sense but also your understanding of the literature on the topic. Criminologists and survey researchers spend a lot of time thinking about what is the best way of asking questions about topics or concepts of interest. They often debate and write about this. In data analysis measurement is key and is the process of systematically assigning numbers to objects and their properties, to facilitate the use of mathematics in studying and describing objects and their relationships. So, as part of your essay, you will need to consider what researchers consider are good questions to measure, to tap into, the abstract concepts you are studying.</p>
<p>There are many items in this survey that relate to this topic, but for purposes of continuing our illustration, we are going to focus on the answers to question <em>QB10</em>. This question asks respondents to identify in what circumstances may be justified to have sexual intercourse without consent. The participants are read a list of items (e.g., “flirting beforehand”) and they can select various of them if so they wish. If you want to look at the codebook again to see how <em>qb10_1</em> is measured, use this <a href="https://www.dropbox.com/s/pvw2ipn45ygm6hm/ZA6695_cdb.pdf?dl=0">link</a> and go to page.384.</p>
<p><img src="imgs/qb10a.png" width="838" /></p>
<p>What name is associated with this variable? Well, you can see that depending on which thing they asked about, it might be <code>qb10_1</code>, <code>qb10_2</code>, <code>qb10_3</code>, etc etc.</p>
<p>Damn! We have one question but several variables! This is common when the question in the survey allows for multiple responses. Typically when this is read into a dataset, survey researchers create a variable for each of the possible multiple responses. If the respondent identified one of those potential responses they will be assigned a “yes” or a “1” for that column. If they did not they will be assigned a “no” or a “0”. Let’s see how this was done in this case:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb223-1" tabindex="-1"></a><span class="fu">class</span>(eb85_3<span class="sc">$</span>qb10_1)</span></code></pre></div>
<pre><code>## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;</code></pre>
<p>This is a vector labelled by haven. We could see what labels were used using the <code>attributes</code> function.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb225-1" tabindex="-1"></a><span class="fu">attributes</span>(eb85_3<span class="sc">$</span>qb10_1)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;INTERCOURSE W/O CONSENT APPROPRIATE WHEN: WEARING SEXY CLOTHES&quot;
## 
## $format.stata
## [1] &quot;%8.0g&quot;
## 
## $class
## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;        
## 
## $labels
## Not mentioned     Mentioned 
##             0             1</code></pre>
<p>We can see here that the value 1 corresponds to cases where this circumstance was mentioned. Let’s see how many people considered this a valid circumstance to have sex without consent.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb227-1" tabindex="-1"></a><span class="fu">table</span>(eb85_3<span class="sc">$</span>qb10_1)</span></code></pre></div>
<pre><code>## 
##     0     1 
## 24787  3031</code></pre>
<p>Fortunately, only a minority of respondents.</p>
<p>Apart from thinking about the variables we will use to measure our outcome of interest, we will need to select some variables that we think may be associated with this outcome. Here we will only do a few. Again, this is something that needs to be informed by the literature (what variables does the literature consider important) and our own interest.</p>
<p>For the sake of illustration, let’s say we are going to look at gender, political background of the respondent, country of origin, age, occupation of the respondents, and type of community they live in. Most of these are demographic variables (not always the more fun or theoretically interesting), but that’s all we have in this Eurobarometer and so they will have to do.</p>
<p>In the same way, you try to identify the names of the variables for your outcome variable, you would need to do this for the variables you use to “explain” your outcome. Once you have done your variable selection you can subset your data to only include these.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb229-1" tabindex="-1"></a><span class="co">#option 1: select()</span></span>
<span id="cb229-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb229-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(eb85_3, qb10_1, qb10_2, qb10_3, qb10_4,</span>
<span id="cb229-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb229-3" tabindex="-1"></a>             qb10_5, qb10_6, qb10_7, qb10_8, qb10_9,</span>
<span id="cb229-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb229-4" tabindex="-1"></a>             qb10_10, qb10_11, qb10_12, d10, d11,</span>
<span id="cb229-5"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb229-5" tabindex="-1"></a>             isocntry, d1, d25, d15a, uniqid)</span></code></pre></div>
<p>Ta-da! We now have a new object called <em>df</em> with only the variables we will be working with. In this format, it is easier to visualise the data. Notice we have also added a variable called <code>uniqid</code>. With many datasets like this, you will have a unique id value that allows you to identify individuals. This id may be handy later on, so we will preserve it in our object.</p>
<p>If you <code>View</code> this object <em>df</em> you will notice that the selected variables appear in the order you selected them. If you wanted a different arrangement, for example, you may have preferred to have <em>uniqid</em> as your first column, you could have modified the code like so:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb230-1" tabindex="-1"></a><span class="co">#option 2: select()</span></span>
<span id="cb230-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb230-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(eb85_3, uniqid, qb10_1, qb10_2, qb10_3, qb10_4,</span>
<span id="cb230-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb230-3" tabindex="-1"></a>             qb10_5, qb10_6, qb10_7, qb10_8, qb10_9,</span>
<span id="cb230-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb230-4" tabindex="-1"></a>             qb10_10, qb10_11, qb10_12, d10, d11,</span>
<span id="cb230-5"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb230-5" tabindex="-1"></a>             isocntry, d1, d25, d15a)</span></code></pre></div>
<p>Or if you just want to reorder one or a few columns (for example, you want to also move d1, d25 and d15 a to the front), you could use <code>everything()</code> afterwards to save some typing, as below:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb231-1" tabindex="-1"></a><span class="co">#option 3: select()</span></span>
<span id="cb231-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb231-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(df, uniqid, d1, d25, d15a, <span class="fu">everything</span>())</span></code></pre></div>
<p>If you want to add a lot of columns, it can save you some typing to have a good look at your data and see whether you can’t get to your selection by using chunks. Since <em>qb10_1</em> and the others are one after the other in the dataset we can use the <code>start.col:end.col</code> syntax like the below:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb232-1" tabindex="-1"></a><span class="co">#option 4: select()</span></span>
<span id="cb232-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb232-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(eb85_3, uniqid, qb10_1<span class="sc">:</span>qb10_12, d10, d11,</span>
<span id="cb232-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb232-3" tabindex="-1"></a>             isocntry, d1, d25, d15a)</span></code></pre></div>
<p>If you have a lot of columns with a similar structure you can use partial matching by adding <code>starts_with()</code>, <code>ends_with()</code> or <code>contains()</code> in your select statement. So, for example, as an alternative to the syntax above, we could use the following:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb233-1" tabindex="-1"></a><span class="co">#option 5: select()</span></span>
<span id="cb233-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb233-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(eb85_3, uniqid, <span class="fu">starts_with</span>(<span class="st">&quot;qb10&quot;</span>), d10, d11,</span>
<span id="cb233-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb233-3" tabindex="-1"></a>             isocntry, d1, d25, d15a)</span></code></pre></div>
<p>Notice how the text we pass as an argument goes between double quotes.</p>
<p>An alternative is to deselect columns by adding a minus sign in front of the column name. You can also deselect chunks of columns. <strong>Don’t execute the code below for this practical</strong>, but if you wanted, for example, to get rid of <em>uniqid</em> you could do the following:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb234-1" tabindex="-1"></a><span class="co">#DO NOT RUN THIS. THIS IS AN EXAMPLE.</span></span>
<span id="cb234-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb234-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(df, <span class="sc">-</span>uniqid)</span></code></pre></div>
<p>Yes, a lot of these tips are about saving you some typing. Being lazy (productive, efficient) is fine. You can find more tips like this and useful ideas if you want to rename your columns or variables in <a href="https://suzan.rbind.io/2018/01/dplyr-tutorial-1/">this tutorial</a>.</p>
</div>
<div id="creating-summated-scales" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Creating summated scales<a href="refresher-on-descriptive-statistics-data-carpentry.html#creating-summated-scales" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now comes the next part. What are we going to do with these variables? How are we going to use them? Here you need to do some thinking using your common sense and also consider how other researchers may have used this question about attitudes to sexual violence. There are always many possibilities.</p>
<p>We could, for example, consider that we are going to split the sample in two: those that consider any of these circumstances valid and those that don’t. We would then end up with a binary indicator that we could use as our outcome variable in our analysis.</p>
<p>The thing is that doing that implies losing information. We may think that someone who considers many circumstances as valid is not the same as the person who only considers one as valid. Yet, creating a global binary indicator would treat these two individuals in the same way.</p>
<p>Another alternative could be to see how many of these circumstances are considered valid excuses for each individual and to produce a sum then for every respondent. Since there are 9 “excuses” we could have a sum from 0 to 9. This is a very rough <strong>summated scale</strong>. You can read more about the proper development of summated scales <a href="https://pdfs.semanticscholar.org/aa84/dc485a07b920a957e9ef295e8dced8fa025c.pdf">here</a>.</p>
<p>Let’s do this. We are going to create a new variable that adds up the responses to <em>qb10_1</em> all the way to <em>qb10_9</em>. For this, we use the <code>mutate</code> function from the <code>dplyr</code> package.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb235-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">mutate</span>(df, </span>
<span id="cb235-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb235-2" tabindex="-1"></a>       <span class="at">at_sexviol =</span> qb10_1 <span class="sc">+</span> qb10_2 <span class="sc">+</span> qb10_3 <span class="sc">+</span> qb10_4 <span class="sc">+</span></span>
<span id="cb235-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb235-3" tabindex="-1"></a>         qb10_5 <span class="sc">+</span> qb10_6 <span class="sc">+</span> qb10_7 <span class="sc">+</span> qb10_8 <span class="sc">+</span> qb10_9)</span>
<span id="cb235-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb235-4" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>at_sexviol)</span></code></pre></div>
<pre><code>## 
##     0     1     2     3     4     5     6     7     8     9 
## 19681  2529  2117  1643   841   416   255   155    57   124</code></pre>
<p>We have a skewed distribution. Most people (19681 here, right?) in the survey consider that none of the identified circumstances are valid excuses for having sexual intercourse without consent. On the other hand, only a minority of individuals (124) consider that all of these 9 circumstances are valid excuses for having sex without consent. A high score in this count variable tells you that the participant is more likely to accept a number of circumstances in which sexual intercourse without consent is acceptable. You may read more about count data of this kind <a href="https://en.wikipedia.org/wiki/Count_data">here</a>.</p>
<p>Hold on for a second, though. There is a variable <code>qb10_10</code> that specifies people that answered “none of these” circumstances. In theory, the number of people with a “1” in that variable (that is, selected this item) should equal 19681 (the number of zeros in our new variable). Let’s check this out:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb237-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>qb10_10)</span></code></pre></div>
<pre><code>## 
##     0     1 
##  9400 18418</code></pre>
<p>Oops! Something doesn’t add up! Only 18418 people said that none of these circumstances were valid. So why when we add all the other items we end up with 19681 rather than 18418? Notice that there is also a qb10_11 and a qb10_12. These two items identify the people who ‘refused’ to answer this question and those who ‘did not know’ how to answer it.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb239-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>qb10_11)</span></code></pre></div>
<pre><code>## 
##     0     1 
## 27563   255</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb241-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>qb10_12)</span></code></pre></div>
<pre><code>## 
##     0     1 
## 26810  1008</code></pre>
<p>In ‘qb10_11’, there are 255 people that refused to answer and, in ‘qb10_12’, 1008 that did not know how to answer. If you add 1008, 255, and 18418 you get 19681. So our new variable is actually computing as zeroes people that did not know how to answer this question or refused to answer it. We do not want that. We do not know what these people think, so it would be wrong to assume that they consider that none of these circumstances are valid excuses for sexual intercourse without consent.</p>
<p>There are many ways to deal with this. We could simply filter out cases where we have values of 1 in these two variables (since we don’t know their answers we could as well get rid of them). But we could also re-code the variable to define these values as what they are, NA (missing data, cases for which we have no valid information).</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb243-1" tabindex="-1"></a>df<span class="sc">$</span>at_sexviol[df<span class="sc">$</span>qb10_11 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> df<span class="sc">$</span>qb10_12 <span class="sc">==</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb243-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb243-2" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>at_sexviol)</span></code></pre></div>
<pre><code>## 
##     0     1     2     3     4     5     6     7     8     9 
## 18418  2529  2117  1643   841   416   255   155    57   124</code></pre>
<p>Pay attention to the code above. When we want to recode based on a condition we use something like that. What we are saying with that code is that we are going to assign as “<code>NA</code>” (missing data) the cases for which the condition between the square brackets is met. Those conditions are as defined when the participants answered don’t know <em>or</em> (the logical operator for “or” is “|”) refused to answer the question (that is when <em>qb10_11</em> or <em>qb10_12</em> equals 1). You can see other scenarios for re-coding using this kind of syntax in the resources we link below. You can see other logical operators used in R <a href="https://www.datamentor.io/r-programming/operator/">here</a>.</p>
<p>Notice that once we do the recoding and rerun the frequency distribution you will see we achieved what we wanted. Now all those missing cases are not counted as zero.</p>
<p>Summated scales like the one we created here are quick and not the most kosher way of combining several questions into a single measure. In research methods, you probably learnt that we often work with theoretical constructs that we do not observe directly (e.g., self-control, anomie, collective efficacy, etc.). We often call these <strong>latent variables</strong>. In order to study these constructs we create measures or scales that are based on <strong>observed variables</strong> (those we actually include and ask in the survey). <a href="https://www.ismanet.org/doctoryourspirit/pdfs/Beck-Depression-Inventory-BDI.pdf">This</a> is a famous measure of <em>depression</em> often used in research. As you can see we have different questions (our observed variables) that we think are related to our latent or not observed (directly) variable (<em>depression</em>). You can also see there are several items or questions all of which we researchers think are linked to depression in this scale. If you provide positive answers to many of these questions we may think that you have this unobserved thing we call <em>depression</em>.</p>
<p>When measuring latent variables it is a good idea to have multiple items that all capture aspects of the unobserved variable we are really interested in measuring. There is a whole field of statistics that focuses on how to analyse if your observed variables are good indicators of your unobserved variable (<strong>psychometry</strong> is how we call this field in psychology) and also that focuses on how to best combine the answers to our observed variables in a single score (<strong>latent variable modelling</strong>). Some of the scores in the Crime Survey for England and Wales that you may use for your essay have been created with these more advanced methods (some of the measures on confidence in the police, for example). Summated scales are not really the best way to do this. But these are more advanced topics that are covered in upper-level undergraduate or postgraduate courses. So for now, we will use summated scales as a convenient if imperfect way of aggregating observed variables.</p>
<!-- can add Cronbach alpha if we want -->
</div>
<div id="collapsing-categories-in-character-variables" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Collapsing categories in character variables<a href="refresher-on-descriptive-statistics-data-carpentry.html#collapsing-categories-in-character-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the variables we selected is the country in which the participant lives. Let’s have a look at this variable.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb245-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>isocntry)</span></code></pre></div>
<pre><code>## 
##     AT     BE     BG     CY     CZ   DE-E   DE-W     DK     EE     ES     FI 
##   1016   1029   1001    501   1060    533   1052   1010   1001   1008   1042 
##     FR GB-GBN GB-NIR     GR     HR     HU     IE     IT     LT     LU     LV 
##   1009   1006    300   1000   1026   1046   1002   1013   1004    508   1010 
##     MT     NL     PL     PT     RO     SE     SI     SK 
##    500   1003   1002   1000   1007   1109   1012   1008</code></pre>
<p>There are 30 countries in the sample. You may consider that for the purposes of your analysis maybe that is too much. For the sake of this tutorial, let’s say that maybe you are not really interested in national differences but in regional differences across different parts of Europe. Say you may want to explore whether these attitudes are different across Western/Central Europe, Scandinavian countries, Mediterranean countries, and Eastern Europe. You do not have a variable with these categories but since you have a variable that gives you the nations you could create such a variable. How would you do that?</p>
<p>First, you need to consider what the new categories are going to be and how you are going to distribute the countries in your sample across those categories. You may do that on a piece of paper. Then you would need to write the code to have a new variable with this information.</p>
<p>We are going to group the countries into 4 regions: Western (AT, BE, CZ, DE-E, DE-W, FR, GB-GBN, GB-NIR, IE, LU, NL), Eastern (BG, EE, HU, LT, LV, PL, RO, SK), Southern (CY, ES, GR, HR, IT, MT, PT, SI), and Northern Europe (DK, FI, SE).</p>
<p>Then you need to figure out what kind of variable we are dealing with here:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb247-1" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>isocntry)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Ok, this is a categorical unordered variable, we know that. But these kinds of variables could be encoded into R as either <em>character</em> vectors, <em>factor</em> variables, or as we have seen as well as <em>haven_labelled</em>. How you recode a variable is contingent on how it is encoded. Here we are going to show you how you would do the recoding with a <em>character</em> variable such as <em>isocntry</em> into another character variable we will call <em>region</em>. We will see later examples of how to recode <em>factors</em>.</p>
<p>We will have a variable with four new categories (Western, Southern, Eastern, and Northern) whenever the right conditions are met. For this, we can use the <code>case_when()</code> function, also from the <code>dplyr</code> package. What this does, is it goes through every <em>case</em>, and does something <em>when</em> it is true. We wrap this in the <code>mutate()</code> function, which allows us to create a new variable. We’ll call this new variable “region”.</p>
<p>First, let’s create four lists, which contain the codes for countries we would like to code Western, Eastern, Northern, and Southern:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb249-1" tabindex="-1"></a>western_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AT&quot;</span>, <span class="st">&quot;BE&quot;</span>, <span class="st">&quot;CZ&quot;</span>, <span class="st">&quot;DE-E&quot;</span>, <span class="st">&quot;DE-W&quot;</span>, </span>
<span id="cb249-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb249-2" tabindex="-1"></a>                  <span class="st">&quot;FR&quot;</span>, <span class="st">&quot;GB-GBN&quot;</span>, <span class="st">&quot;GB-NIR&quot;</span>, <span class="st">&quot;IE&quot;</span>, <span class="st">&quot;LU&quot;</span>, <span class="st">&quot;NL&quot;</span>)</span>
<span id="cb249-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb249-3" tabindex="-1"></a>eastern_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;BG&quot;</span> , <span class="st">&quot;EE&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;LT&quot;</span> , <span class="st">&quot;LV&quot;</span> , <span class="st">&quot;PL&quot;</span> , <span class="st">&quot;RO&quot;</span>, <span class="st">&quot;SK&quot;</span>)</span>
<span id="cb249-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb249-4" tabindex="-1"></a>northern_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;SE&quot;</span>)</span>
<span id="cb249-5"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb249-5" tabindex="-1"></a>southern_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;CY&quot;</span>, <span class="st">&quot;ES&quot;</span>, <span class="st">&quot;GR&quot;</span>, <span class="st">&quot;HR&quot;</span> , <span class="st">&quot;IT&quot;</span> , <span class="st">&quot;MT&quot;</span>, <span class="st">&quot;PT&quot;</span>, <span class="st">&quot;SI&quot;</span>)</span></code></pre></div>
<p>Now that we have these lists, our condition will be to evaluate whether the value for each row for the <code>isocntry</code> variable falls within one of these, and <em>when</em> this is the <em>case</em> then code if appropriately:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb250-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">case_when</span>(isocntry <span class="sc">%in%</span> western_list <span class="sc">~</span> <span class="st">&quot;Western&quot;</span>, </span>
<span id="cb250-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-3" tabindex="-1"></a>                              isocntry <span class="sc">%in%</span> eastern_list <span class="sc">~</span> <span class="st">&quot;Eastern&quot;</span>,</span>
<span id="cb250-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-4" tabindex="-1"></a>                              isocntry <span class="sc">%in%</span> northern_list <span class="sc">~</span> <span class="st">&quot;Northern&quot;</span>, </span>
<span id="cb250-5"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-5" tabindex="-1"></a>                              isocntry <span class="sc">%in%</span> southern_list <span class="sc">~</span> <span class="st">&quot;Southern&quot;</span>)</span>
<span id="cb250-6"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-6" tabindex="-1"></a>           )</span>
<span id="cb250-7"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb250-7" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>## 
##  Eastern Northern Southern  Western 
##     8079     3161     7060     9518</code></pre>
<p>What we are doing above is initialising a new variable in the <em>df</em> object that we are calling <em>region</em>. We are then assigning to each of the four categories in this character vector those participants in the survey that have the corresponding values in the <em>isocntry</em> variable as defined for each category. So for example if Austria is the value in <em>isocntry</em> we are telling R we want this person to be assigned the value of “Western” in the <em>region</em> variable. And so on. You can see the list of ISO country codes <a href="https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes">here</a>.</p>
<p>Once you have created the variable you could start exploring if there is any association with our outcome variable. For example, using <strong>mosaic plots</strong> from the <code>vcd</code> package (if you don’t have it installed the code won’t run).</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb252-1" tabindex="-1"></a><span class="fu">library</span>(vcd)</span></code></pre></div>
<pre><code>## Loading required package: grid</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb254-1" tabindex="-1"></a><span class="fu">mosaic</span>(<span class="sc">~</span>region <span class="sc">+</span> at_sexviol, <span class="at">data =</span> df)</span></code></pre></div>
<p><img src="04-carpentry_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>In a mosaic plot like this, the height of the region levels indicates how big that group is. You can see there are many more observations in our sample that come from Western countries than from Northern countries. Here what we are interested in is the length. We see that Northern countries have proportionally more people in the zero category than any other group. On the other hand, Eastern countries have fewer zeros (so looking as if attitudes more permissive towards sexual violence are more common there, even if still a minority). We will come back to these kinds of plots later this semester.</p>
</div>
<div id="working-with-apparently-cryptic-variable-names-and-levels" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Working with apparently cryptic variable names and levels<a href="refresher-on-descriptive-statistics-data-carpentry.html#working-with-apparently-cryptic-variable-names-and-levels" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s look at the variable <em>d10</em> in our dataset:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb255-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>d10)</span></code></pre></div>
<pre><code>## 
##     1     2 
## 12230 15588</code></pre>
<p>What is this? Unclear, isn’t it? If you look at the questionnaire you will see that this variable measures gender, that values of 1 correspond to men and that values of 2 correspond to women. But this is far from straightforward just by looking a the printed table or the name of the variable.</p>
<p>To start with we may want to change the name of the variable. One way to do this is the following:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb257-1" tabindex="-1"></a><span class="co">#THIS IS AN EXAMPLE</span></span>
<span id="cb257-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb257-2" tabindex="-1"></a><span class="fu">colnames</span>(data)[<span class="fu">colnames</span>(data)<span class="sc">==</span><span class="st">&quot;old_name&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;new_name&quot;</span></span></code></pre></div>
<p>Of course, we need to change the names for valid ones in our case. So adapting that code we would write as follows:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb258-1" tabindex="-1"></a><span class="co">#option 1: to change a variable name</span></span>
<span id="cb258-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb258-2" tabindex="-1"></a><span class="fu">colnames</span>(df)[<span class="fu">colnames</span>(df)<span class="sc">==</span><span class="st">&quot;d10&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;gender&quot;</span></span></code></pre></div>
<p>If you prefer the <em>tydiverse</em> dialect (that aims to save you typing among other things), then you would use the <code>rename</code> function as below (beware if you already renamed <em>d10</em> using <code>colnames</code> there will be no longer a <em>d10</em> variable and therefore R will return an error).</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb259-1" tabindex="-1"></a><span class="co">#option 2: to change a variable name</span></span>
<span id="cb259-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb259-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rename</span>(df, <span class="at">gender=</span>d10)</span></code></pre></div>
<p>If you now check the names of the variables (with the <code>names</code> function) in <code>df</code> you will see what has happened:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb260-1" tabindex="-1"></a><span class="fu">names</span>(df)</span></code></pre></div>
<pre><code>##  [1] &quot;uniqid&quot;     &quot;qb10_1&quot;     &quot;qb10_2&quot;     &quot;qb10_3&quot;     &quot;qb10_4&quot;    
##  [6] &quot;qb10_5&quot;     &quot;qb10_6&quot;     &quot;qb10_7&quot;     &quot;qb10_8&quot;     &quot;qb10_9&quot;    
## [11] &quot;qb10_10&quot;    &quot;qb10_11&quot;    &quot;qb10_12&quot;    &quot;gender&quot;     &quot;d11&quot;       
## [16] &quot;isocntry&quot;   &quot;d1&quot;         &quot;d25&quot;        &quot;d15a&quot;       &quot;at_sexviol&quot;
## [21] &quot;region&quot;</code></pre>
<p>If you want to change many variable names it may be more efficient doing it all at once. First, we are going to select fewer variables and retain only the ones we will continue using:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb262-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">select</span>(df, uniqid, at_sexviol, gender, d11, d1, d25, d15a, region)</span></code></pre></div>
<p>Now we can change a bunch of variables’ names all at once with the following code:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb263-1" tabindex="-1"></a><span class="fu">names</span>(df)[<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;politics&quot;</span>, <span class="st">&quot;urban&quot;</span>, <span class="st">&quot;occupation&quot;</span>)</span>
<span id="cb263-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb263-2" tabindex="-1"></a><span class="fu">names</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;uniqid&quot;     &quot;at_sexviol&quot; &quot;gender&quot;     &quot;age&quot;        &quot;politics&quot;  
## [6] &quot;urban&quot;      &quot;occupation&quot; &quot;region&quot;</code></pre>
<p>You may have seen we wrote <code>[4:7]</code> above. This square bracket notation identifies the columns within that particular object. It is indicating to R that we only wanted to change the name of the variables defining columns 4 to 7 in the dataframe, those corresponded to d11, d1, d25, and d15a, which respectively (we can see in the questionnaire) correspond to age, politics, whether the respondent lives in an urban setting and occupation. We assign to those columns the names we specify (in the appropriate order) in the list that follows. Now we will be less likely to confuse ourselves since we have columns with meaningful names (which will appear in any output and plots we produce).</p>
<p>Let’s look at occupation:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb265-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>occupation)</span></code></pre></div>
<pre><code>## 
##    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 
## 1588 1864 1845 8916  129   14  384  768  517  878  313 1921 2202  856 2062  271 
##   17   18 
## 2471  819</code></pre>
<p>There are 18 categories here. And it is not clear what they mean.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb267-1" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>occupation)</span></code></pre></div>
<pre><code>## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;</code></pre>
<p>Remember that this is <code>haven_labelled</code>. If we look at the attributes we can see the correspondence between the numbers above and the labels.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb269-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>occupation)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;OCCUPATION OF RESPONDENT&quot;
## 
## $format.stata
## [1] &quot;%8.0g&quot;
## 
## $class
## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;        
## 
## $labels
##       Responsible for ordinary shopping, etc. 
##                                             1 
##                                       Student 
##                                             2 
##           Unemployed, temporarily not working 
##                                             3 
##                       Retired, unable to work 
##                                             4 
##                                        Farmer 
##                                             5 
##                                     Fisherman 
##                                             6 
##                   Professional (lawyer, etc.) 
##                                             7 
##              Owner of a shop, craftsmen, etc. 
##                                             8 
##                    Business proprietors, etc. 
##                                             9 
## Employed professional (employed doctor, etc.) 
##                                            10 
##                      General management, etc. 
##                                            11 
##                       Middle management, etc. 
##                                            12 
##                    Employed position, at desk 
##                                            13 
##                 Employed position, travelling 
##                                            14 
##                Employed position, service job 
##                                            15 
##                                    Supervisor 
##                                            16 
##                         Skilled manual worker 
##                                            17 
##                 Unskilled manual worker, etc. 
##                                            18</code></pre>
<p>Having to look at this every time is not very convenient. You may prefer to simply use the labels directly. For this, we can use the <code>as_factor</code> function from the <code>haven</code> package.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb271-1" tabindex="-1"></a>df<span class="sc">$</span>occup_f <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(df<span class="sc">$</span>occupation)</span>
<span id="cb271-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb271-2" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>occup_f)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb273-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>occup_f)</span></code></pre></div>
<pre><code>## 
##       Responsible for ordinary shopping, etc. 
##                                          1588 
##                                       Student 
##                                          1864 
##           Unemployed, temporarily not working 
##                                          1845 
##                       Retired, unable to work 
##                                          8916 
##                                        Farmer 
##                                           129 
##                                     Fisherman 
##                                            14 
##                   Professional (lawyer, etc.) 
##                                           384 
##              Owner of a shop, craftsmen, etc. 
##                                           768 
##                    Business proprietors, etc. 
##                                           517 
## Employed professional (employed doctor, etc.) 
##                                           878 
##                      General management, etc. 
##                                           313 
##                       Middle management, etc. 
##                                          1921 
##                    Employed position, at desk 
##                                          2202 
##                 Employed position, travelling 
##                                           856 
##                Employed position, service job 
##                                          2062 
##                                    Supervisor 
##                                           271 
##                         Skilled manual worker 
##                                          2471 
##                 Unskilled manual worker, etc. 
##                                           819</code></pre>
<p>Now you have easier to interpret the output.</p>
</div>
<div id="recoding-factors" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Recoding factors<a href="refresher-on-descriptive-statistics-data-carpentry.html#recoding-factors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As we said there are many different types of objects in R and depending on their nature the recoding procedures may vary. You may remember that many times categorical variables will be encoded as factors. Let’s go back to our newly created <em>occup_f</em>. We have 18 categories here. These are possibly too many. Some of them have too few cases, like <em>fisherman</em>. Although this is a fairly large dataset we only have 14 fishermen. It would be a bit brave to guess what fishermen across Europe think about sexual violence based on a sample of just 14 of them.</p>
<p>This is a very common scenario when you analyse data. In these cases is helpful to think of ways of adding the groups with small counts (like fishermen in this case) to a broader but still meaningful category. People often refer to this as <em>collapsing categories</em>. You also have to think theoretically, do you have good enough reasons to think that there ought to be meaningful differences in attitudes to sexual violence among these 18 groups? If you don’t you may want to collapse into fewer categories that may make more sense.</p>
<p>As when we created the <em>region</em> variable the first thing to do is to come out with a new coding scheme for this variable. We are going to use the following. I’m not making this scheme up, I am just using the scheme that the Eurobarometer uses to simplify these categories.</p>
<pre><code>1   Self-employed (5 to 9 in d15a)  
2   Managers (10 to 12 in d15a) 
3   Other white collars (13 or 14 in d15a)  
4   Manual workers (15 to 18 in d15a)   
5   House persons (1 in d15a)   
6   Unemployed (3 in d15a)  
7   Retired (4 in d15a) 
8   Students (2 in d15a)</code></pre>
<p>It would be quicker to recode from <em>d15a</em> (<a href="https://www.dropbox.com/s/pvw2ipn45ygm6hm/ZA6695_cdb.pdf?dl=0">here, see the page.618</a>) into a new variable (there would be less typing when dealing with numbers rather than labels). But here we are going to use this example to show you how to recode from a factor variable, so instead, we will recode from <em>occup_f</em>.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-1" tabindex="-1"></a>df<span class="sc">$</span>occup2 <span class="ot">&lt;-</span> df<span class="sc">$</span>occup_f</span>
<span id="cb276-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-2" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>occup2) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Self-employed&quot;</span> <span class="ot">=</span> </span>
<span id="cb276-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-3" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">&quot;Farmer&quot;</span> , <span class="st">&quot;Fisherman&quot;</span> ,</span>
<span id="cb276-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-4" tabindex="-1"></a>                              <span class="st">&quot;Professional (lawyer, etc.)&quot;</span> ,</span>
<span id="cb276-5"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-5" tabindex="-1"></a>                              <span class="st">&quot;Owner of a shop, craftsmen, etc.&quot;</span>,</span>
<span id="cb276-6"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-6" tabindex="-1"></a>                              <span class="st">&quot;Business proprietors, etc.&quot;</span>),</span>
<span id="cb276-7"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-7" tabindex="-1"></a>                          <span class="st">&quot;Managers&quot;</span> <span class="ot">=</span> </span>
<span id="cb276-8"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-8" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">&quot;Employed professional (employed doctor, etc.)&quot;</span>,</span>
<span id="cb276-9"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-9" tabindex="-1"></a>                              <span class="st">&quot;General management, etc.&quot;</span>, </span>
<span id="cb276-10"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-10" tabindex="-1"></a>                              <span class="st">&quot;Middle management, etc.&quot;</span>),</span>
<span id="cb276-11"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-11" tabindex="-1"></a>                          <span class="st">&quot;Other white collar&quot;</span> <span class="ot">=</span> </span>
<span id="cb276-12"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-12" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">&quot;Employed position, at desk&quot;</span>, </span>
<span id="cb276-13"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-13" tabindex="-1"></a>                              <span class="st">&quot;Employed position, travelling&quot;</span>),</span>
<span id="cb276-14"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-14" tabindex="-1"></a>                          <span class="st">&quot;Manual workers&quot;</span> <span class="ot">=</span> </span>
<span id="cb276-15"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-15" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">&quot;Employed position, service job&quot;</span>,</span>
<span id="cb276-16"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-16" tabindex="-1"></a>                              <span class="st">&quot;Supervisor&quot;</span>,</span>
<span id="cb276-17"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-17" tabindex="-1"></a>                              <span class="st">&quot;Skilled manual worker&quot;</span>,</span>
<span id="cb276-18"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-18" tabindex="-1"></a>                              <span class="st">&quot;Unskilled manual worker, etc.&quot;</span>),</span>
<span id="cb276-19"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-19" tabindex="-1"></a>                          <span class="st">&quot;House persons&quot;</span> <span class="ot">=</span> <span class="st">&quot;Responsible for ordinary shopping, etc.&quot;</span>,</span>
<span id="cb276-20"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-20" tabindex="-1"></a>                          <span class="st">&quot;Unemployed&quot;</span> <span class="ot">=</span> <span class="st">&quot;Unemployed, temporarily not working&quot;</span>,</span>
<span id="cb276-21"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-21" tabindex="-1"></a>                          <span class="st">&quot;Retired&quot;</span> <span class="ot">=</span>  <span class="st">&quot;Retired, unable to work&quot;</span>,</span>
<span id="cb276-22"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb276-22" tabindex="-1"></a>                          <span class="st">&quot;Student&quot;</span> <span class="ot">=</span> <span class="st">&quot;Student&quot;</span>)</span></code></pre></div>
<p>One of the things you need to be very careful with when recoding factors or character variables is that you need to input the chunk of text in the existing variables exactly as they appear in the variable. Otherwise, you will get into trouble. So, for example, if in the code above you wrote <code>fishermen</code> instead of <code>Fisherman</code> you would have 14 fewer cases in the <code>Self-Employed</code> level than you should have. When doing this kind of operation is always convenient to check that the categories add up correctly.</p>
<p>For more details on how to recode factors and other potential scenarios, you may want to read <a href="https://peerj.com/preprints/3163/">this paper</a> by Amelia McNamara and Nicholas Horton.</p>
</div>
<div id="understanding-missing-data" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Understanding missing data<a href="refresher-on-descriptive-statistics-data-carpentry.html#understanding-missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As we have already seen, you will have participants who do not provide you with valid answers to the questions in the survey. In general, in any kind of data set you work with, whether it comes from surveys or not, you will have cases for which you won’t have valid information for particular variables in your dataframe. Missing data is common.</p>
<p>Let’s explore the <em>politics</em> variable and see how many missing observations are in the variable.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb277-1" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<pre><code>## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb279-1" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   4.000   5.000   5.196   7.000  10.000    6935</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb281-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df<span class="sc">$</span>politics))</span></code></pre></div>
<pre><code>## [1] 6935</code></pre>
<p><img src="imgs/leftrighta.png" />
This is the question as it was asked from the survey respondents. Notice the difference in the response options and the categories in <em>politics</em>. We know that those that see themselves further to the left will have answer 1 and those that see themselves further to the right would have answer 10. According to the codebook, 97 refers to ‘Refusal’ and 98 means ‘DK (don’t know)’. However, if you look at the ‘df’ data, you will see that those two ‘Refusal’ or ‘DK (don’t know)’ <em>in the questionnaire</em> are shown as just NA. In sum, they both are shown as ‘NA’ but actually it has two levels: ‘Refusal’ and ‘DK (don’t know)’. Run the code below, and check we are not lying.</p>
<p>Let’s look closer at the attributes:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb283-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<p>A tip if you don’t want to see as much output. If you want to access directly only some of the attributes you can call them directly by modifying the code as below:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb284-1" tabindex="-1"></a><span class="co">#option 1: to see labels only</span></span>
<span id="cb284-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb284-2" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>politics)<span class="sc">$</span>labels</span></code></pre></div>
<p>Or we could use the val_labels function from the labelled package for the same result:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb285-1" tabindex="-1"></a><span class="co">#option 2: to see labels only</span></span>
<span id="cb285-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb285-2" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb285-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb285-3" tabindex="-1"></a><span class="fu">val_labels</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<p>You may have good theoretical reasons to preserve these NAs in your analysis. Perhaps you think that people that did not answer this question have particular reasons not to do so and those reasons may be associated with their attitudes to violence. In that case, you may want to somehow preserve them in your analysis not simply remove NA. Absent that rationale you may just want to treat them as they are: missing data. You just have no way of knowing if these people are more or less lefty or conservative.</p>
<p>Let’s check something about the <code>politics</code> variable:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb286-1" tabindex="-1"></a><span class="fu">class</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<p>It says the values are the <code>haven_labelled</code> vector, not <code>numeric</code>. As we could do some descriptive statistics once we treat this ordinal variable as a quantitative variable, now we are going to transform this as a numeric variable.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb287-1" tabindex="-1"></a>df<span class="sc">$</span>politics_n <span class="ot">&lt;-</span><span class="fu">as.numeric</span>(df<span class="sc">$</span>politics)</span></code></pre></div>
<p>If you try this, the results of <code>skim()</code> are printed horizontally, with one section per variable type and one row per variable.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb288-1" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb288-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb288-2" tabindex="-1"></a><span class="fu">skim</span>(df<span class="sc">$</span>politics_n)</span></code></pre></div>
<p>If we want to see what percentage of cases is NA across our dataset we could use <code>colMeans</code> combined with <code>is.na</code>. This will compute the mean (the proportion) of cases that are NA in each of the columns of the dataframe:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb289-1" tabindex="-1"></a><span class="fu">colMeans</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>##       uniqid   at_sexviol       gender          age     politics        urban 
## 0.0000000000 0.0454022575 0.0000000000 0.0000000000 0.2492990150 0.0006470631 
##   occupation       region      occup_f       occup2   politics_n 
## 0.0000000000 0.0000000000 0.0000000000 0.0000000000 0.2492990150</code></pre>
<p>Now, we are going to learn how to remove labels. Run the code below, look at the ‘Urban’ and see its labels carefully.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb291-1" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb291-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb291-2" tabindex="-1"></a><span class="fu">val_labels</span>(df)</span></code></pre></div>
<pre><code>## $uniqid
## NULL
## 
## $at_sexviol
## NULL
## 
## $gender
##   Man Woman 
##     1     2 
## 
## $age
##                      15 years                      96 years 
##                            15                            96 
## 99 and older [not documented] 
##                            99 
## 
## $politics
##          Box 1 - left                 Box 2                 Box 3 
##                     1                     2                     3 
##                 Box 4                 Box 5                 Box 6 
##                     4                     5                     6 
##                 Box 7                 Box 8                 Box 9 
##                     7                     8                     9 
##        Box 10 - right Refusal (Spontaneous)                    DK 
##                    10                    NA                    NA 
## 
## $urban
##      Rural area or village Small or middle sized town 
##                          1                          2 
##                 Large town                         DK 
##                          3                         NA 
## 
## $occupation
##       Responsible for ordinary shopping, etc. 
##                                             1 
##                                       Student 
##                                             2 
##           Unemployed, temporarily not working 
##                                             3 
##                       Retired, unable to work 
##                                             4 
##                                        Farmer 
##                                             5 
##                                     Fisherman 
##                                             6 
##                   Professional (lawyer, etc.) 
##                                             7 
##              Owner of a shop, craftsmen, etc. 
##                                             8 
##                    Business proprietors, etc. 
##                                             9 
## Employed professional (employed doctor, etc.) 
##                                            10 
##                      General management, etc. 
##                                            11 
##                       Middle management, etc. 
##                                            12 
##                    Employed position, at desk 
##                                            13 
##                 Employed position, travelling 
##                                            14 
##                Employed position, service job 
##                                            15 
##                                    Supervisor 
##                                            16 
##                         Skilled manual worker 
##                                            17 
##                 Unskilled manual worker, etc. 
##                                            18 
## 
## $region
## NULL
## 
## $occup_f
## NULL
## 
## $occup2
## NULL
## 
## $politics_n
## NULL</code></pre>
<p>Notice that in <em>urban</em> there are explicit codes ‘DK (don’t know)’ (not two labels ‘Refusal’ and ‘DK (don’t know)’ like the <code>politics</code> variable) for missing data but that these values won’t be treated as such, at least we do something. Let’s see how many cases we have in this scenario:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb293-1" tabindex="-1"></a><span class="fu">summary</span>(df<span class="sc">$</span>urban)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   1.000   1.000   2.000   1.957   3.000   3.000      18</code></pre>
<p>Not too bad. Let’s sort this variable:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb295-1" tabindex="-1"></a>df<span class="sc">$</span>urban_f <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(df<span class="sc">$</span>urban)</span>
<span id="cb295-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb295-2" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>urban_f)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;Rural area or village&quot;      &quot;Small or middle sized town&quot;
## [3] &quot;Large town&quot;                 &quot;DK&quot;                        
## 
## $class
## [1] &quot;factor&quot;
## 
## $label
## [1] &quot;TYPE OF COMMUNITY&quot;</code></pre>
<p>You can see that even though the data is NA, the levels ‘DK (don’t know)’ appears printed in the output and shows 18 missing values. This is still a valid level:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb297-1" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>urban_f)</span></code></pre></div>
<pre><code>## [1] &quot;Rural area or village&quot;      &quot;Small or middle sized town&quot;
## [3] &quot;Large town&quot;                 &quot;DK&quot;</code></pre>
<p>So, we may want to remove it explicitly if we don’t want output reminding us what we already know, that “there are not” DK levels (since now we call them and treat them as NA).</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb299-1" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>urban_f)[<span class="fu">levels</span>(df<span class="sc">$</span>urban_f) <span class="sc">==</span> <span class="st">&#39;DK&#39;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb299-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb299-2" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>urban_f)</span></code></pre></div>
<pre><code>## 
##      Rural area or village Small or middle sized town 
##                       8563                      11881 
##                 Large town 
##                       7356</code></pre>
<p>Above also saw the codes for <em>gender</em>. Let’s use <code>as_factor</code> again for this variable:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb301-1" tabindex="-1"></a>df<span class="sc">$</span>gender_f <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(df<span class="sc">$</span>gender)</span></code></pre></div>
<p>Let’s just keep the variables we will retain for our final analysis:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb302-1" tabindex="-1"></a>df_f <span class="ot">&lt;-</span> <span class="fu">select</span>(df, uniqid, at_sexviol, gender_f, age, politics_n,</span>
<span id="cb302-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb302-2" tabindex="-1"></a>               urban_f, occup_f, region)</span></code></pre></div>
<p>We are going to do some further exploration of NA. Let’s create a new variable that identifies the cases that have missing data in at least one of the columns in the data with the final variables for our analysis. For this, we can use the <code>complete.cases</code> function that creates a logical vector indicating whether any of the cases has missing values in at least one column:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb303-1" tabindex="-1"></a>df_f<span class="sc">$</span>complete <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>((df_f))</span>
<span id="cb303-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb303-2" tabindex="-1"></a><span class="fu">table</span>(df_f<span class="sc">$</span>complete)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##  7634 20184</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb305-1" tabindex="-1"></a><span class="fu">mean</span>(df_f<span class="sc">$</span>complete)</span></code></pre></div>
<pre><code>## [1] 0.7255734</code></pre>
<p>So, shocking as this may sound you only have full data in 72% of the participants. Notice how the percentage of missing cases in the variables range:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb307-1" tabindex="-1"></a><span class="fu">colMeans</span>(<span class="fu">is.na</span>(df_f))</span></code></pre></div>
<pre><code>##       uniqid   at_sexviol     gender_f          age   politics_n      urban_f 
## 0.0000000000 0.0454022575 0.0000000000 0.0000000000 0.2492990150 0.0006470631 
##      occup_f       region     complete 
## 0.0000000000 0.0000000000 0.0000000000</code></pre>
<p>The function <code>complete.cases</code> is returning what cases have missing data <strong>in any of</strong> the variables not in a singular one. It is not unusual for this percentage to be high. You may end up with a massive loss of cases even though the individual variables themselves do not look as bad as the end scenario.</p>
<p>Later this term we will cover forms of analysis (e.g., multiple regression) in which you have to work with multiple variables at the same time. This form of analysis requires you to have information for all the cases and all the variables. Every case for which there is no information in one of the variables in your analysis is automatically excluded from such analysis. So the actual sample size you use when using these techniques is the sample size for which you have full information. In our example, your sample size (when you do multiple regression analysis or any multivariate analysis) will be 20184 rather than 27818.</p>
<p>This being the case it makes sense to exclude from your data all cases that have some missing information in the variables you will be using in your analysis. For this, you can use the <code>na.omit</code> function. We create a new object (I name it “full_df”, you can call it whatever) and put inside it the outcome of running <code>na.omit</code> in our original sample (“df_f”).</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb309-1" tabindex="-1"></a>full_df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(df_f)</span></code></pre></div>
<p>Now we have a dataset ready for starting our analysis.</p>
</div>
<div id="exploring-dataframes-visually" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> Exploring dataframes visually<a href="refresher-on-descriptive-statistics-data-carpentry.html#exploring-dataframes-visually" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have covered now a number of functions you can use to explore your data, such as <code>skimr::skim()</code>, <code>str()</code>, <code>summary()</code>, <code>table()</code>, or <code>dplyr::glimpse()</code>. But sometimes is useful to get a more panoramic way. For this, we can use the <code>visdat</code> package for visualising whole dataframes and its main function <code>vis_dat()</code>.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb310-1" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb310-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb310-2" tabindex="-1"></a><span class="fu">vis_dat</span>(df_f)</span></code></pre></div>
<p><img src="04-carpentry_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p>Nice one! You get a visual representation of how your variables are encoded in this dataframe. You have several categorical variables such as region, urban_f, urban_f, and occup_f. We see that the region is encoded as a <code>character</code> vector, whereas the others are <code>factors</code>. For the purposes of this course, it is generally better to have your categorical variables encoded as factors. So one of the next steps in our data prep may be to recode region as a factor.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb311-1" tabindex="-1"></a>df_f<span class="sc">$</span>f_region <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df_f<span class="sc">$</span>region)</span></code></pre></div>
<p>We can also see we have age, a quantitative variable, <em>age</em>, encoded as <code>haven_labelled</code>. We could as well encode it as <code>numeric</code>.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb312-1" tabindex="-1"></a>df_f<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_f<span class="sc">$</span>age)</span></code></pre></div>
<p>What we do with <em>at_sexviol</em> depends on how we decide to treat it. But for argument’s sake let’s say we are going to treat it as numerical.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb313-1" tabindex="-1"></a>df_f<span class="sc">$</span>at_sexviol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_f<span class="sc">$</span>at_sexviol)</span></code></pre></div>
<p>The other piece of info you get with <code>vis_dat</code> is the prevalence of missing data (NA) for each variable (the dark horizontal cases represent a missing case in the variable). We can summarise missing data visually more clearly with <code>vis_miss</code>.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb314-1" tabindex="-1"></a><span class="fu">vis_miss</span>(df_f)</span></code></pre></div>
<p><img src="04-carpentry_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>You can find more details about how to explore missing data in the vignette of the <code>naniar</code> package <a href="http://naniar.njtierney.com/articles/getting-started-w-naniar.html">here</a>.</p>
</div>
<div id="a-quick-recap-on-descriptive-statistics" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> A quick recap on descriptive statistics<a href="refresher-on-descriptive-statistics-data-carpentry.html#a-quick-recap-on-descriptive-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This was covered extensively last semester, and we have also touched on this in the last three weeks, but just as a quick refresher. We can have a review of some descriptive statistics to end the week.</p>
<div id="central-tendency" class="section level3 hasAnchor" number="4.11.1">
<h3><span class="header-section-number">4.11.1</span> Central Tendency<a href="refresher-on-descriptive-statistics-data-carpentry.html#central-tendency" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Central tendency refers to a descriptive summary of the centre of the data’s distribution; it takes the form of a single number that is meant to represent the middle or average of the data. The <strong>mean</strong>, <strong>median</strong>, and <strong>mode</strong> are common statistics of the central tendency.</p>
<p>The <em>mean</em> is the average and it is useful when we want to summarise a variable quickly. Its disadvantage is that it is sensitive to extreme values, so the mean can be distorted easily.</p>
<p>For example, the mean value for our political scale variable is:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb315-1" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5.195805</code></pre>
<p>To address this sensitivity, the <em>median</em> is a better measure because it is a robust estimate, which means that it is not easily swayed by extreme values. It is the middle value of the distribution.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb317-1" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>The <em>mode</em> helps give an idea of what is the most typical value in the distribution, which is the most frequently occurring case in the data. While mean and median apply to numeric variables, the mode is most useful when describing categorical variables. For example, you may want to know the most frequently occurring category. To query the mode, we use the function <code>mlv()</code> (acronym for <strong>m</strong>ost <strong>l</strong>ikely <strong>v</strong>alues) from the <code>modeest</code> package to answer this question:
<br></p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb319-1" tabindex="-1"></a><span class="fu">library</span>(modeest)</span>
<span id="cb319-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb319-2" tabindex="-1"></a><span class="fu">mlv</span>(df<span class="sc">$</span>occup_f)</span></code></pre></div>
<pre><code>## [1] Retired, unable to work
## 18 Levels: Responsible for ordinary shopping, etc. ... Unskilled manual worker, etc.</code></pre>
<!-- ### **Dispersion in Nominal and Ordinal Variables** -->
<!-- We learn how to conduct two measures of dispersion in `R` for categorical variables: the variation ratio and the index of qualitative variation: -->
<!-- The **variation ratio** (VR) tells us the proportion of cases that are not in the modal category – basically cases not in the most frequent or ‘popular’ category. The formula for the variation ratio (VR) is: -->
<!-- $$VR = 1 – ({\frac {N~modalcat~} {N~total~}})$$ -->
<!-- $N~modalcat$ refers to the frequency of observations in the modal category, and $N~total~$ refers to the total number of observations. This formula states that VR is equal to 1 minus the proportion of observations that are in the modal category, which is the same as saying the proportion of observations that are not in the modal category.  -->
<!-- So let's create objects we need for this calculation. First, how many observations do we have in our modal category? Well, looking back at the occupation variable, the modal category was:  -->
<!-- ```{r} -->
<!-- mlv(df$occup_f) -->
<!-- ``` -->
<!-- To check how many we have, we can create a frequency table:  -->
<!-- ```{r} -->
<!-- table(df$occup_f) -->
<!-- ``` -->
<!-- We can see from that it's 8916. So we could just assign this to our object:  -->
<!-- ```{r} -->
<!-- num_modal_cat <- 8916 -->
<!-- ``` -->
<!-- But with copy and pasting there is always scope f -->
</div>
<div id="dispersion" class="section level3 hasAnchor" number="4.11.2">
<h3><span class="header-section-number">4.11.2</span> Dispersion<a href="refresher-on-descriptive-statistics-data-carpentry.html#dispersion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You always want to talk about dispersion as well. If you have a numeric variable, you might want to consider the <strong>range</strong>, which is the difference between the maximum and minimum value in a given distribution:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb321-1" tabindex="-1"></a><span class="fu">max</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p>You also want to talk about the <strong>variance</strong> ( <span class="math inline">\(s^2\)</span> ), which tells you about spread, specifically the sum of the squared deviations from the mean, which is then divided by the total number of observations. You will then also come across <strong>standard deviation</strong> (SD), which is the square root of the variance. You can find these with the <code>sd()</code> and the <code>var()</code> functions:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb323-1" tabindex="-1"></a><span class="fu">var</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 4.864302</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb325-1" tabindex="-1"></a><span class="fu">sd</span>(df<span class="sc">$</span>politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 2.205516</code></pre>
<p>Visual representations of dispersions such as a histogram are also handy for getting an overview of your data.</p>
<p>For categorical variables, a frequency table might show distribution, or again a visualisation. You can get quantitative summaries of dispersion for categorical variables, such as variance ratio and the index of qualitative variation, but I’ll leave these for now. If you want to know about these, ask us in the labs!</p>
</div>
<div id="bivariate-analysis" class="section level3 hasAnchor" number="4.11.3">
<h3><span class="header-section-number">4.11.3</span> Bivariate analysis<a href="refresher-on-descriptive-statistics-data-carpentry.html#bivariate-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve touched on this already in week two, when we looked at using the <code>group_by()</code> and <code>summarise()</code> functions. Look back at week 2 for more detail. But for example, if we wanted to know what is the mean political score broken down by occupation, we would answer that question using these two functions:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb327-1" tabindex="-1"></a>politics_by_occ <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb327-2"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb327-2" tabindex="-1"></a>    <span class="fu">group_by</span>(occup_f) <span class="sc">%&gt;%</span> </span>
<span id="cb327-3"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb327-3" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_poli_score =</span> <span class="fu">mean</span>(politics_n, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb327-4"><a href="refresher-on-descriptive-statistics-data-carpentry.html#cb327-4" tabindex="-1"></a>politics_by_occ</span></code></pre></div>
<pre><code>## # A tibble: 18 × 2
##    occup_f                                       mean_poli_score
##    &lt;fct&gt;                                                   &lt;dbl&gt;
##  1 Responsible for ordinary shopping, etc.                  5.23
##  2 Student                                                  4.91
##  3 Unemployed, temporarily not working                      4.96
##  4 Retired, unable to work                                  5.17
##  5 Farmer                                                   5.69
##  6 Fisherman                                                4.82
##  7 Professional (lawyer, etc.)                              5.14
##  8 Owner of a shop, craftsmen, etc.                         5.40
##  9 Business proprietors, etc.                               5.72
## 10 Employed professional (employed doctor, etc.)            5.41
## 11 General management, etc.                                 5.59
## 12 Middle management, etc.                                  5.16
## 13 Employed position, at desk                               5.21
## 14 Employed position, travelling                            5.38
## 15 Employed position, service job                           5.11
## 16 Supervisor                                               5.39
## 17 Skilled manual worker                                    5.25
## 18 Unskilled manual worker, etc.                            5.30</code></pre>
<p>We can now begin to hypothesise whether there are differences in political leanings between different occupations. Next week we will continue to expand on how we might actually go about generalising our conclusions from these observed descriptive analyses.</p>
</div>
</div>
<div id="further-resources-1" class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> Further resources<a href="refresher-on-descriptive-statistics-data-carpentry.html#further-resources-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are many other ways to recode variables and create new variables based on existing ones. Here we only provided some examples. We cannot exhaust all possibilities in this tutorial. You can find additional examples and code for how to do the recoding of variables in the following links. Please make sure that you spend some time looking at these additional resources. They are not optional.</p>
<p><a href="https://peerj.com/preprints/3163.pdf">Wrangling categorical data in R</a></p>
<p><a href="http://rprogramming.net/recode-data-in-r/">http://rprogramming.net/recode-data-in-r/</a></p>
<p><a href="http://www.cookbook-r.com/Manipulating_data/Recoding_data/">http://www.cookbook-r.com/Manipulating_data/Recoding_data/</a></p>
<p>[<a href="https://mgimond.github.io/ES218/dplyr.html" class="uri">https://mgimond.github.io/ES218/dplyr.html</a>)</p>
<p><a href="https://www.r-bloggers.com/from-continuous-to-categorical/">https://www.r-bloggers.com/from-continuous-to-categorical/</a></p>
<p>You should also look for the <code>dplyr</code> documentation for the functions mutate() and recode().</p>
<p>If you would like to combine several variables into one for your analysis in more complex ways but do not know how to do that, please do get in touch. Also, do not hesitate to approach us if you have any other specific queries.</p>
</div>
<div id="summary-exercise-for-this-week-3" class="section level2 hasAnchor" number="4.13">
<h2><span class="header-section-number">4.13</span> Summary: exercise for this week<a href="refresher-on-descriptive-statistics-data-carpentry.html#summary-exercise-for-this-week-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once you finish your lab session, don’t forget to do this <a href="https://eonk.shinyapps.io/MCD_ex">Exercise</a> and have a chance to sum up this week’s R codes.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualisation-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="foundations-of-statistical-inference-confidence-intervals.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
